<!DOCTYPE html>
<html lang="fr">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Apprentissage Géométrie et Conversions</title>
	<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
	<style>
		* {
			box-sizing: border-box;
			margin: 0;
			padding: 0;
			font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
		}
		body {
			background-color: #f5f7fa;
			color: #333;
			line-height: 1.6;
		}
		.container {
			max-width: 1200px;
			margin: 0 auto;
			padding: 20px;
		}
		header {
			text-align: center;
			margin-bottom: 30px;
			padding: 20px;
			background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
			color: white;
			border-radius: 10px;
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
		}
		h1 {
			font-size: 2.5rem;
			margin-bottom: 10px;
		}
		.subtitle {
			font-size: 1.2rem;
			opacity: 0.9;
		}
		.app-content {
			display: flex;
			flex-wrap: wrap;
			gap: 20px;
		}
		.category-selector {
			flex: 1;
			min-width: 250px;
			background: white;
			padding: 20px;
			border-radius: 10px;
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
		}
		.question-container {
			flex: 2;
			min-width: 300px;
			background: white;
			padding: 20px;
			border-radius: 10px;
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
			display: flex;
			flex-direction: column;
		}
		.category-btn {
			display: block;
			width: 100%;
			padding: 15px;
			margin-bottom: 10px;
			background-color: #f0f4f8;
			border: none;
			border-radius: 8px;
			font-size: 1.1rem;
			cursor: pointer;
			transition: all 0.3s ease;
		}
		.category-btn:hover {
			background-color: #e1e8f0;
			transform: translateY(-2px);
		}
		.category-btn.active {
			background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
			color: white;
		}
		.figure-container {
			display: flex;
			justify-content: center;
			margin: 20px 0;
			min-height: 300px;
		}
		canvas {
			border: 1px solid #ddd;
			border-radius: 8px;
			background-color: #f9f9f9;
		}
		.question-text {
			font-size: 1.3rem;
			margin-bottom: 20px;
			text-align: center;
			min-height: 60px;
			display: flex;
			align-items: center;
			justify-content: center;
		}
		.answers-container {
			display: grid;
			grid-template-columns: 1fr 1fr;
			gap: 12px;
			margin-bottom: 20px;
		}
		.answer-btn {
			padding: 15px;
			background-color: #f0f4f8;
			border: 2px solid #d1d9e6;
			border-radius: 8px;
			cursor: pointer;
			transition: all 0.2s ease;
			font-size: 1rem;
			min-height: 60px;
			display: flex;
			align-items: center;
			justify-content: center;
			text-align: center;
			word-break: break-word;
		}
		.answer-btn:hover {
			background-color: #e1e8f0;
			border-color: #3498db;
		}
		.answer-btn.correct {
			background-color: #4caf50;
			color: white;
			border-color: #4caf50;
		}
		.answer-btn.incorrect {
			background-color: #f44336;
			color: white;
			border-color: #f44336;
		}
		.input-answer {
			width: 100%;
			padding: 15px;
			border: 2px solid #d1d9e6;
			border-radius: 8px;
			font-size: 1.1rem;
			margin-bottom: 15px;
			text-align: center;
		}
		.input-answer:focus {
			outline: none;
			border-color: #3498db;
		}
		.submit-btn {
			display: block;
			width: 100%;
			padding: 15px;
			background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
			color: white;
			border: none;
			border-radius: 8px;
			font-size: 1.1rem;
			cursor: pointer;
			transition: all 0.3s ease;
			margin-top: 10px;
		}
		.submit-btn:hover {
			transform: translateY(-2px);
			box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
		}
		.submit-btn:disabled {
			background: #cccccc;
			cursor: not-allowed;
			transform: none;
		}
		.feedback {
			padding: 15px;
			border-radius: 8px;
			margin-top: 20px;
			text-align: center;
			font-weight: bold;
			min-height: 60px;
			display: flex;
			align-items: center;
			justify-content: center;
		}
		.feedback.correct {
			background-color: #e8f5e9;
			color: #2e7d32;
			border: 1px solid #4caf50;
		}
		.feedback.incorrect {
			background-color: #ffebee;
			color: #c62828;
			border: 1px solid #f44336;
		}
		.progress-container {
			margin-top: 20px;
			background-color: #f0f4f8;
			border-radius: 10px;
			padding: 15px;
		}
		.progress-bar {
			height: 10px;
			background-color: #e0e0e0;
			border-radius: 5px;
			overflow: hidden;
			margin-bottom: 10px;
		}
		.progress {
			height: 100%;
			background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
			transition: width 0.3s ease;
		}
		.stats {
			display: flex;
			justify-content: space-between;
			font-size: 0.9rem;
			color: #666;
		}
		.next-btn {
			display: block;
			width: 100%;
			padding: 15px;
			background-color: #4caf50;
			color: white;
			border: none;
			border-radius: 8px;
			font-size: 1.1rem;
			cursor: pointer;
			margin-top: 15px;
			transition: all 0.3s ease;
		}
		.next-btn:hover {
			background-color: #388e3c;
			transform: translateY(-2px);
		}
		.figure-info {
			text-align: center;
			margin-top: 10px;
			font-style: italic;
			color: #666;
			min-height: 30px;
		}
		.no-figure {
			display: flex;
			align-items: center;
			justify-content: center;
			height: 300px;
			color: #666;
			font-style: italic;
			background-color: #f9f9f9;
			border: 1px solid #ddd;
			border-radius: 8px;
		}
		.total-score-container {
			margin: 20px 0;
			background: white;
			padding: 20px;
			border-radius: 10px;
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
		}
		.total-score h3 {
			text-align: center;
			margin-bottom: 15px;
			color: #333;
		}
		.score-circle {
			width: 100px;
			height: 100px;
			border-radius: 50%;
			background: conic-gradient(#4caf50 0% var(--score), #f0f0f0 var(--score) 100%);
			margin: 0 auto 15px;
			display: flex;
			align-items: center;
			justify-content: center;
			position: relative;
		}
		.score-circle::before {
			content: '';
			position: absolute;
			width: 80px;
			height: 80px;
			background: white;
			border-radius: 50%;
		}
		.score-percentage {
			position: relative;
			font-size: 1.5rem;
			font-weight: bold;
			color: #333;
		}
		.score-details {
			text-align: center;
		}
		.score-details p {
			margin: 5px 0;
			color: #666;
		}
		.pythagoras-btn {
			display: block;
			width: 100%;
			padding: 12px;
			background-color: #ff9800;
			color: white;
			border: none;
			border-radius: 8px;
			font-size: 1rem;
			cursor: pointer;
			margin-top: 10px;
			transition: all 0.3s ease;
		}
		.pythagoras-btn:hover {
			background-color: #f57c00;
			transform: translateY(-2px);
		}
		.loading-container {
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			height: 300px;
			text-align: center;
		}
		.loading-spinner {
			width: 50px;
			height: 50px;
			border: 5px solid #f3f3f3;
			border-top: 5px solid #3498db;
			border-radius: 50%;
			animation: spin 1s linear infinite;
			margin-bottom: 20px;
		}
		@keyframes spin {
			0% { transform: rotate(0deg); }
			100% { transform: rotate(360deg); }
		}
		@media (max-width: 768px) {
			.app-content {
				flex-direction: column;
			}
			.category-selector, .question-container {
				width: 100%;
			}
			.answers-container {
				grid-template-columns: 1fr;
			}
			.question-text {
				font-size: 1.1rem;
			}
		}
	</style>
</head>
<body>
<div id="app">
	<div class="container">
		<header>
			<h1>Apprentissage Géométrie et Conversions</h1>
			<p class="subtitle">Maîtrisez les périmètres, surfaces, volumes et conversions d'unités</p>
		</header>

		<div v-if="isLoading" class="loading-container">
			<div class="loading-spinner"></div>
			<p>Chargement des questions...</p>
		</div>

		<div v-else class="app-content">
			<div class="category-selector">
				<h2>Catégories</h2>
				<button
						v-for="category in categories"
						:key="category.id"
						:class="['category-btn', { active: currentCategory === category.id }]"
						@click="selectCategory(category.id)"
				>
					{{ category.name }}
				</button>

				<div class="total-score-container">
					<div class="total-score">
						<h3>Score Global</h3>
						<div class="score-circle" :style="{ '--score': overallScore + '%' }">
							<span class="score-percentage">{{ overallScore }}%</span>
						</div>
						<div class="score-details">
							<p>Réussite: {{ totalScore }}/{{ totalQuestionsAttempted }}</p>
							<p>Questions Pythagore: {{ pythagorasQuestions.length }}</p>
						</div>
					</div>
				</div>

				<button class="pythagoras-btn" @click="showPythagorasQuestions">
					Voir les questions Pythagore
				</button>
			</div>

			<div class="question-container">
				<div class="question-text">{{ currentQuestion.text }}</div>

				<div class="figure-container">
					<canvas
							v-if="currentQuestion.figure"
							ref="figureCanvas"
							width="300"
							height="300"
					></canvas>
					<div v-else class="no-figure">
						Aucune figure nécessaire pour cette question
					</div>
				</div>

				<div class="figure-info" v-if="currentQuestion.figureInfo">
					{{ currentQuestion.figureInfo }}
				</div>

				<div v-if="currentQuestion.type === 'qcm'">
					<div class="answers-container">
						<button
								v-for="(answer, index) in currentQuestion.answers"
								:key="index"
								:class="['answer-btn',
                                         { correct: selectedAnswer === answer && answerIsCorrect,
                                           incorrect: selectedAnswer === answer && !answerIsCorrect && answerSubmitted }]"
								@click="selectAnswer(answer)"
								:disabled="answerSubmitted"
						>
							{{ answer }}
						</button>
					</div>
				</div>

				<div v-else>
					<input
							type="number"
							class="input-answer"
							v-model.number="numericAnswer"
							placeholder="Entrez votre réponse (nombre)"
							:disabled="answerSubmitted"
							step="any"
					>
				</div>

				<button
						class="submit-btn"
						@click="submitAnswer"
						v-if="!answerSubmitted && (selectedAnswer !== null || numericAnswer !== null)"
						:disabled="(currentQuestion.type === 'qcm' && selectedAnswer === null) || (currentQuestion.type === 'numeric' && numericAnswer === null)"
				>
					Valider la réponse
				</button>

				<div
						class="feedback"
						:class="{ correct: answerIsCorrect, incorrect: !answerIsCorrect }"
						v-if="answerSubmitted"
				>
					<span v-if="answerIsCorrect">✅ Correct! {{ currentQuestion.explanation }}</span>
					<span v-else>❌ Incorrect. La bonne réponse est: {{ formatCorrectAnswer(currentQuestion.correctAnswer) }}. {{ currentQuestion.explanation }}</span>
				</div>

				<button
						class="next-btn"
						@click="nextQuestion"
						v-if="answerSubmitted"
				>
					Question suivante
				</button>

				<div class="progress-container">
					<div class="progress-bar">
						<div class="progress" :style="{ width: progress + '%' }"></div>
					</div>
					<div class="stats">
						<span>Score: {{ correctAnswers }}/{{ totalQuestions }}</span>
						<span>Progression: {{ Math.round(progress) }}%</span>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<script>
	const { createApp, ref, computed, onMounted, watch } = Vue;

	// Données des questions
	const questionsData = {
		"categories": [
			{ "id": "perimeter", "name": "Périmètres" },
			{ "id": "area", "name": "Surfaces" },
			{ "id": "volume", "name": "Volumes" },
			{ "id": "conversion", "name": "Conversions d'unités" },
			{ "id": "density", "name": "Masses volumiques" },
			{ "id": "mixed", "name": "Problèmes complexes" },
			{ "id": "pythagoras", "name": "Théorème de Pythagore" }
		],
		"questions": {
			"perimeter": [
				{
					"id": 1,
					"text": "Quel est le périmètre d'un carré de côté 5 cm?",
					"type": "qcm",
					"answers": ["10 cm", "20 cm", "25 cm", "15 cm"],
					"correctAnswer": "20 cm",
					"explanation": "Le périmètre d'un carré est 4 × côté = 4 × 5 = 20 cm",
					"figure": "square",
					"dimensions": { "side": 5 }
				},
				{
					"id": 2,
					"text": "Calculez le périmètre d'un rectangle de longueur 8 cm et largeur 3 cm.",
					"type": "numeric",
					"correctAnswer": 22,
					"explanation": "Périmètre = 2 × (longueur + largeur) = 2 × (8 + 3) = 22 cm",
					"figure": "rectangle",
					"dimensions": { "length": 8, "width": 3 }
				},
				{
					"id": 3,
					"text": "Quel est le périmètre d'un cercle de diamètre 10 cm? (π ≈ 3.14)",
					"type": "qcm",
					"answers": ["31.4 cm", "15.7 cm", "25 cm", "30 cm"],
					"correctAnswer": "31.4 cm",
					"explanation": "Périmètre = π × diamètre = 3.14 × 10 = 31.4 cm",
					"figure": "circle",
					"dimensions": { "diameter": 10 }
				},
				{
					"id": 4,
					"text": "Un triangle équilatéral a un côté de 7 cm. Quel est son périmètre?",
					"type": "numeric",
					"correctAnswer": 21,
					"explanation": "Périmètre = 3 × côté = 3 × 7 = 21 cm",
					"figure": "triangle",
					"dimensions": { "base": 7, "height": 6 }
				}
			],
			"area": [
				{
					"id": 1,
					"text": "Quelle est l'aire d'un carré de côté 6 cm?",
					"type": "qcm",
					"answers": ["12 cm²", "24 cm²", "36 cm²", "30 cm²"],
					"correctAnswer": "36 cm²",
					"explanation": "Aire = côté × côté = 6 × 6 = 36 cm²",
					"figure": "square",
					"dimensions": { "side": 6 }
				},
				{
					"id": 2,
					"text": "Calculez l'aire d'un triangle de base 10 cm et hauteur 4 cm.",
					"type": "numeric",
					"correctAnswer": 20,
					"explanation": "Aire = (base × hauteur) / 2 = (10 × 4) / 2 = 20 cm²",
					"figure": "triangle",
					"dimensions": { "base": 10, "height": 4 }
				},
				{
					"id": 3,
					"text": "Quelle est l'aire d'un disque de rayon 7 cm? (π ≈ 3.14)",
					"type": "qcm",
					"answers": ["43.96 cm²", "153.86 cm²", "21.98 cm²", "49 cm²"],
					"correctAnswer": "153.86 cm²",
					"explanation": "Aire = π × rayon² = 3.14 × 7² = 3.14 × 49 = 153.86 cm²",
					"figure": "circle",
					"dimensions": { "radius": 7 }
				},
				{
					"id": 4,
					"text": "Un losange a des diagonales de 8 cm et 6 cm. Quelle est son aire?",
					"type": "numeric",
					"correctAnswer": 24,
					"explanation": "Aire = (diagonale1 × diagonale2) / 2 = (8 × 6) / 2 = 24 cm²",
					"figure": "rhombus",
					"dimensions": { "d1": 8, "d2": 6, "side": 5 }
				}
			],
			"volume": [
				{
					"id": 1,
					"text": "Quel est le volume d'un cube d'arête 3 cm?",
					"type": "qcm",
					"answers": ["9 cm³", "18 cm³", "27 cm³", "12 cm³"],
					"correctAnswer": "27 cm³",
					"explanation": "Volume = arête³ = 3 × 3 × 3 = 27 cm³",
					"figure": "cube",
					"dimensions": { "side": 3 }
				},
				{
					"id": 2,
					"text": "Calculez le volume d'un parallélépipède rectangle de dimensions 5 cm, 4 cm et 6 cm.",
					"type": "numeric",
					"correctAnswer": 120,
					"explanation": "Volume = longueur × largeur × hauteur = 5 × 4 × 6 = 120 cm³",
					"figure": "rectangularPrism",
					"dimensions": { "length": 5, "width": 4, "height": 6 }
				},
				{
					"id": 3,
					"text": "Quel est le volume d'une sphère de rayon 5 cm? (π ≈ 3.14)",
					"type": "qcm",
					"answers": ["314 cm³", "523.33 cm³", "125 cm³", "78.5 cm³"],
					"correctAnswer": "523.33 cm³",
					"explanation": "Volume = (4/3) × π × rayon³ = (4/3) × 3.14 × 125 ≈ 523.33 cm³",
					"figure": "sphere",
					"dimensions": { "radius": 5 }
				},
				{
					"id": 4,
					"text": "Un cylindre a un rayon de 4 cm et une hauteur de 10 cm. Quel est son volume? (π ≈ 3.14)",
					"type": "numeric",
					"correctAnswer": 502.4,
					"explanation": "Volume = π × rayon² × hauteur = 3.14 × 16 × 10 = 502.4 cm³",
					"figure": "cylinder",
					"dimensions": { "radius": 4, "height": 10 }
				}
			],
			"conversion": [
				{
					"id": 1,
					"text": "Combien de mètres y a-t-il dans 2.5 km?",
					"type": "qcm",
					"answers": ["25 m", "250 m", "2500 m", "25000 m"],
					"correctAnswer": "2500 m",
					"explanation": "1 km = 1000 m, donc 2.5 km = 2.5 × 1000 = 2500 m",
					"figure": null
				},
				{
					"id": 2,
					"text": "Convertissez 4500 g en kg.",
					"type": "numeric",
					"correctAnswer": 4.5,
					"explanation": "1 kg = 1000 g, donc 4500 g = 4500 / 1000 = 4.5 kg",
					"figure": null
				},
				{
					"id": 3,
					"text": "Combien de centimètres cubes y a-t-il dans 3.5 L?",
					"type": "qcm",
					"answers": ["35 cm³", "350 cm³", "3500 cm³", "35000 cm³"],
					"correctAnswer": "3500 cm³",
					"explanation": "1 L = 1000 cm³, donc 3.5 L = 3.5 × 1000 = 3500 cm³",
					"figure": null
				},
				{
					"id": 4,
					"text": "Convertissez 2.5 heures en minutes.",
					"type": "numeric",
					"correctAnswer": 150,
					"explanation": "1 heure = 60 minutes, donc 2.5 heures = 2.5 × 60 = 150 minutes",
					"figure": null
				},
				{
					"id": 5,
					"text": "Combien de mm² y a-t-il dans 15 cm²?",
					"type": "qcm",
					"answers": ["150 mm²", "1500 mm²", "15000 mm²", "150000 mm²"],
					"correctAnswer": "1500 mm²",
					"explanation": "1 cm² = 100 mm², donc 15 cm² = 15 × 100 = 1500 mm²",
					"figure": null
				}
			],
			"density": [
				{
					"id": 1,
					"text": "Un objet a une masse de 500 g et un volume de 250 cm³. Quelle est sa masse volumique?",
					"type": "qcm",
					"answers": ["0.5 g/cm³", "2 g/cm³", "125000 g/cm³", "1.25 g/cm³"],
					"correctAnswer": "2 g/cm³",
					"explanation": "Masse volumique = masse / volume = 500 / 250 = 2 g/cm³",
					"figure": null
				},
				{
					"id": 2,
					"text": "La masse volumique de l'or est de 19.3 g/cm³. Quelle est la masse d'un cube d'or de 2 cm d'arête?",
					"type": "numeric",
					"correctAnswer": 154.4,
					"explanation": "Volume du cube = 2³ = 8 cm³. Masse = masse volumique × volume = 19.3 × 8 = 154.4 g",
					"figure": "cube",
					"dimensions": { "side": 2 }
				},
				{
					"id": 3,
					"text": "Un liquide a une masse de 800 g et occupe un volume de 1 L. Quelle est sa masse volumique en g/cm³?",
					"type": "qcm",
					"answers": ["0.8 g/cm³", "1.25 g/cm³", "800 g/cm³", "0.08 g/cm³"],
					"correctAnswer": "0.8 g/cm³",
					"explanation": "1 L = 1000 cm³. Masse volumique = 800 / 1000 = 0.8 g/cm³",
					"figure": null
				},
				{
					"id": 4,
					"text": "Un bloc de fer (masse volumique = 7800 kg/m³) a un volume de 0.2 m³. Quelle est sa masse?",
					"type": "numeric",
					"correctAnswer": 1560,
					"explanation": "Masse = masse volumique × volume = 7800 × 0.2 = 1560 kg",
					"figure": "rectangularPrism",
					"dimensions": { "length": 1, "width": 1, "height": 0.2 }
				},
				{
					"id": 5,
					"text": "La masse volumique de l'aluminium est 2.7 g/cm³. Quel volume occupe une masse de 540 g?",
					"type": "numeric",
					"correctAnswer": 200,
					"explanation": "Volume = masse / masse volumique = 540 / 2.7 = 200 cm³",
					"figure": null
				}
			],
			"mixed": [
				{
					"id": 1,
					"text": "Une piscine rectangulaire mesure 8 m de long, 4 m de large et 1.5 m de profondeur. Quel volume d'eau peut-elle contenir?",
					"type": "numeric",
					"correctAnswer": 48,
					"explanation": "Volume = longueur × largeur × hauteur = 8 × 4 × 1.5 = 48 m³",
					"figure": "rectangularPrism",
					"dimensions": { "length": 8, "width": 4, "height": 1.5 }
				},
				{
					"id": 2,
					"text": "Un réservoir cylindrique a un diamètre de 2 m et une hauteur de 3 m. Calculez son volume (π ≈ 3.14).",
					"type": "numeric",
					"correctAnswer": 9.42,
					"explanation": "Rayon = diamètre/2 = 1 m. Volume = π × rayon² × hauteur = 3.14 × 1² × 3 = 9.42 m³",
					"figure": "cylinder",
					"dimensions": { "radius": 1, "height": 3 }
				},
				{
					"id": 3,
					"text": "Une plaque de fer de 2 m² a une épaisseur de 5 cm. Si la masse volumique du fer est 7800 kg/m³, quelle est sa masse?",
					"type": "numeric",
					"correctAnswer": 780,
					"explanation": "Volume = surface × épaisseur = 2 × 0.05 = 0.1 m³. Masse = masse volumique × volume = 7800 × 0.1 = 780 kg",
					"figure": null
				},
				{
					"id": 4,
					"text": "Un câble en cuivre de 50 m de long a une section de 10 mm². La masse volumique du cuivre est 8960 kg/m³. Quelle est sa masse?",
					"type": "numeric",
					"correctAnswer": 4.48,
					"explanation": "Volume = longueur × section = 50 × 10×10⁻⁶ = 0.0005 m³. Masse = 8960 × 0.0005 = 4.48 kg",
					"figure": null
				},
				{
					"id": 5,
					"text": "Une sphère en aluminium a une masse de 540 g. La masse volumique de l'aluminium est 2.7 g/cm³. Quel est son rayon?",
					"type": "numeric",
					"correctAnswer": 3,
					"explanation": "Volume = masse / masse volumique = 540 / 2.7 = 200 cm³. Rayon = ∛(3V/4π) = ∛(3×200/(4×3.14)) ≈ 3 cm",
					"figure": "sphere",
					"dimensions": { "radius": 3 }
				},
				{
					"id": 6,
					"text": "Une pyramide à base carrée a un côté de base de 6 m et une hauteur de 4 m. Quelle est la longueur d'une arête latérale?",
					"type": "numeric",
					"correctAnswer": 5.83,
					"explanation": "Demi-diagonale de la base = (6√2)/2 = 3√2 ≈ 4.24 m. Arête² = 4² + (3√2)² = 16 + 18 = 34, donc arête = √34 ≈ 5.83 m",
					"figure": "pyramid",
					"dimensions": { "base": 6, "height": 4 },
					"usesPythagoras": true
				},
				{
					"id": 7,
					"text": "Un cône a un rayon de 3 cm et une hauteur de 4 cm. Quelle est la longueur de sa génératrice?",
					"type": "numeric",
					"correctAnswer": 5,
					"explanation": "Génératrice² = rayon² + hauteur² = 3² + 4² = 9 + 16 = 25, donc génératrice = 5 cm",
					"figure": "cone",
					"dimensions": { "radius": 3, "height": 4, "slant": 5 },
					"usesPythagoras": true
				},
				{
					"id": 8,
					"text": "Une boîte de conserve a un diamètre de 8 cm et une hauteur de 12 cm. Quelle est sa surface totale? (π ≈ 3.14)",
					"type": "numeric",
					"correctAnswer": 401.92,
					"explanation": "Surface latérale = π × diamètre × hauteur = 3.14 × 8 × 12 = 301.44 cm². Surface des bases = 2 × π × rayon² = 2 × 3.14 × 16 = 100.48 cm². Total = 301.44 + 100.48 = 401.92 cm²",
					"figure": "cylinder",
					"dimensions": { "radius": 4, "height": 12 }
				}
			],
			"pythagoras": [
				{
					"id": 1,
					"text": "Dans un triangle rectangle, les côtés adjacents à l'angle droit mesurent 3 cm et 4 cm. Quelle est la longueur de l'hypoténuse?",
					"type": "qcm",
					"answers": ["5 cm", "7 cm", "6 cm", "8 cm"],
					"correctAnswer": "5 cm",
					"explanation": "D'après le théorème de Pythagore: hypoténuse² = 3² + 4² = 9 + 16 = 25, donc hypoténuse = √25 = 5 cm",
					"figure": "rightTriangle",
					"dimensions": { "a": 3, "b": 4, "c": 5 },
					"usesPythagoras": true
				},
				{
					"id": 2,
					"text": "L'hypoténuse d'un triangle rectangle mesure 13 cm et un côté mesure 5 cm. Quelle est la longueur de l'autre côté?",
					"type": "numeric",
					"correctAnswer": 12,
					"explanation": "D'après Pythagore: côté² = 13² - 5² = 169 - 25 = 144, donc côté = √144 = 12 cm",
					"figure": "rightTriangle",
					"dimensions": { "a": 5, "b": 12, "c": 13 },
					"usesPythagoras": true
				},
				{
					"id": 3,
					"text": "Une échelle de 5 m est appuyée contre un mur. Le pied de l'échelle est à 3 m du mur. À quelle hauteur arrive l'échelle?",
					"type": "numeric",
					"correctAnswer": 4,
					"explanation": "Hauteur² = 5² - 3² = 25 - 9 = 16, donc hauteur = √16 = 4 m",
					"figure": "rightTriangle",
					"dimensions": { "a": 3, "b": 4, "c": 5 },
					"usesPythagoras": true
				},
				{
					"id": 4,
					"text": "Les diagonales d'un losange mesurent 6 cm et 8 cm. Quelle est la longueur d'un côté du losange?",
					"type": "numeric",
					"correctAnswer": 5,
					"explanation": "Le losange est formé de 4 triangles rectangles. Côté² = (3)² + (4)² = 9 + 16 = 25, donc côté = 5 cm",
					"figure": "rhombus",
					"dimensions": { "d1": 6, "d2": 8, "side": 5 },
					"usesPythagoras": true
				},
				{
					"id": 5,
					"text": "Un rectangle a une longueur de 8 cm et une largeur de 6 cm. Quelle est la longueur de sa diagonale?",
					"type": "numeric",
					"correctAnswer": 10,
					"explanation": "Diagonale² = 8² + 6² = 64 + 36 = 100, donc diagonale = 10 cm",
					"figure": "rectangle",
					"dimensions": { "length": 8, "width": 6 },
					"usesPythagoras": true
				},
				{
					"id": 6,
					"text": "Dans un triangle rectangle, l'hypoténuse mesure 10 cm et un côté mesure 6 cm. Quelle est la longueur de l'autre côté?",
					"type": "qcm",
					"answers": ["8 cm", "7 cm", "9 cm", "11 cm"],
					"correctAnswer": "8 cm",
					"explanation": "Côté² = 10² - 6² = 100 - 36 = 64, donc côté = √64 = 8 cm",
					"figure": "rightTriangle",
					"dimensions": { "a": 6, "b": 8, "c": 10 },
					"usesPythagoras": true
				},
				{
					"id": 7,
					"text": "Un cône a une génératrice de 13 cm et un rayon de 5 cm. Quelle est sa hauteur?",
					"type": "numeric",
					"correctAnswer": 12,
					"explanation": "Hauteur² = génératrice² - rayon² = 169 - 25 = 144, donc hauteur = 12 cm",
					"figure": "cone",
					"dimensions": { "radius": 5, "height": 12, "slant": 13 },
					"usesPythagoras": true
				}
			]
		}
	};

	// Fonctions de dessin des figures géométriques
	const FigureDrawer = {
		drawSquare(ctx, centerX, centerY, side) {
			const size = side * 15;
			const x = centerX - size / 2;
			const y = centerY - size / 2;

			ctx.strokeStyle = '#3498db';
			ctx.lineWidth = 2;
			ctx.strokeRect(x, y, size, size);

			ctx.fillStyle = '#333';
			ctx.font = '14px Arial';
			ctx.textAlign = 'center';
			ctx.fillText(`${side} cm`, centerX, y - 10);
			ctx.textAlign = 'right';
			ctx.fillText(`${side} cm`, x - 10, centerY);
		},

		drawRectangle(ctx, centerX, centerY, length, width) {
			const scaledLength = length * 10;
			const scaledWidth = width * 10;
			const x = centerX - scaledLength / 2;
			const y = centerY - scaledWidth / 2;

			ctx.strokeStyle = '#3498db';
			ctx.lineWidth = 2;
			ctx.strokeRect(x, y, scaledLength, scaledWidth);

			ctx.fillStyle = '#333';
			ctx.font = '14px Arial';
			ctx.textAlign = 'center';
			ctx.fillText(`${length} cm`, centerX, y - 10);
			ctx.textAlign = 'right';
			ctx.fillText(`${width} cm`, x - 10, centerY);
		},

		drawCircle(ctx, centerX, centerY, radius) {
			const scaledRadius = radius * 10;

			ctx.strokeStyle = '#3498db';
			ctx.lineWidth = 2;
			ctx.beginPath();
			ctx.arc(centerX, centerY, scaledRadius, 0, 2 * Math.PI);
			ctx.stroke();

			ctx.strokeStyle = '#e74c3c';
			ctx.setLineDash([5, 3]);
			ctx.beginPath();
			ctx.moveTo(centerX, centerY);
			ctx.lineTo(centerX + scaledRadius, centerY);
			ctx.stroke();
			ctx.setLineDash([]);

			ctx.fillStyle = '#333';
			ctx.font = '14px Arial';
			ctx.textAlign = 'center';
			ctx.fillText(`r = ${radius} cm`, centerX + scaledRadius / 2, centerY + 20);
		},

		drawTriangle(ctx, centerX, centerY, base, height) {
			const scaledBase = base * 10;
			const scaledHeight = height * 10;
			const x = centerX - scaledBase / 2;
			const y = centerY + scaledHeight / 2;

			ctx.strokeStyle = '#3498db';
			ctx.lineWidth = 2;
			ctx.beginPath();
			ctx.moveTo(x, y);
			ctx.lineTo(x + scaledBase, y);
			ctx.lineTo(x + scaledBase / 2, y - scaledHeight);
			ctx.closePath();
			ctx.stroke();

			ctx.fillStyle = '#333';
			ctx.font = '14px Arial';
			ctx.textAlign = 'center';
			ctx.fillText(`${base} cm`, centerX, y + 20);
			ctx.textAlign = 'left';
			ctx.fillText(`${height} cm`, x + scaledBase + 10, centerY);
		},

		drawCube(ctx, centerX, centerY, side) {
			const size = side * 12;
			const perspective = 0.3;

			ctx.strokeStyle = '#3498db';
			ctx.lineWidth = 2;
			ctx.strokeRect(centerX - size/2, centerY - size/2, size, size);

			ctx.beginPath();
			ctx.moveTo(centerX - size/2, centerY - size/2);
			ctx.lineTo(centerX - size/2 - size*perspective, centerY - size/2 - size*perspective);
			ctx.lineTo(centerX + size/2 - size*perspective, centerY - size/2 - size*perspective);
			ctx.lineTo(centerX + size/2, centerY - size/2);
			ctx.stroke();

			ctx.beginPath();
			ctx.moveTo(centerX + size/2, centerY - size/2);
			ctx.lineTo(centerX + size/2 - size*perspective, centerY - size/2 - size*perspective);
			ctx.lineTo(centerX + size/2 - size*perspective, centerY + size/2 - size*perspective);
			ctx.lineTo(centerX + size/2, centerY + size/2);
			ctx.stroke();

			ctx.fillStyle = '#333';
			ctx.font = '14px Arial';
			ctx.textAlign = 'center';
			ctx.fillText(`${side} cm`, centerX, centerY - size/2 - 10);
		},

		drawRectangularPrism(ctx, centerX, centerY, length, width, height) {
			const scaledLength = length * 8;
			const scaledWidth = width * 8;
			const scaledHeight = height * 8;
			const perspective = 0.3;

			ctx.strokeStyle = '#3498db';
			ctx.lineWidth = 2;
			ctx.strokeRect(centerX - scaledLength/2, centerY - scaledHeight/2, scaledLength, scaledHeight);

			ctx.beginPath();
			ctx.moveTo(centerX - scaledLength/2, centerY - scaledHeight/2);
			ctx.lineTo(centerX - scaledLength/2 - scaledWidth*perspective, centerY - scaledHeight/2 - scaledWidth*perspective);
			ctx.lineTo(centerX + scaledLength/2 - scaledWidth*perspective, centerY - scaledHeight/2 - scaledWidth*perspective);
			ctx.lineTo(centerX + scaledLength/2, centerY - scaledHeight/2);
			ctx.stroke();

			ctx.beginPath();
			ctx.moveTo(centerX + scaledLength/2, centerY - scaledHeight/2);
			ctx.lineTo(centerX + scaledLength/2 - scaledWidth*perspective, centerY - scaledHeight/2 - scaledWidth*perspective);
			ctx.lineTo(centerX + scaledLength/2 - scaledWidth*perspective, centerY + scaledHeight/2 - scaledWidth*perspective);
			ctx.lineTo(centerX + scaledLength/2, centerY + scaledHeight/2);
			ctx.stroke();

			ctx.fillStyle = '#333';
			ctx.font = '14px Arial';
			ctx.textAlign = 'center';
			ctx.fillText(`${length} cm`, centerX, centerY - scaledHeight/2 - 10);
			ctx.textAlign = 'left';
			ctx.fillText(`${height} cm`, centerX + scaledLength/2 + 10, centerY);
			ctx.textAlign = 'right';
			ctx.fillText(`${width} cm`, centerX - scaledLength/2 - 10, centerY - scaledHeight/4);
		},

		drawSphere(ctx, centerX, centerY, radius) {
			const scaledRadius = radius * 10;

			ctx.strokeStyle = '#3498db';
			ctx.lineWidth = 2;
			ctx.beginPath();
			ctx.arc(centerX, centerY, scaledRadius, 0, 2 * Math.PI);
			ctx.stroke();

			ctx.fillStyle = '#333';
			ctx.font = '14px Arial';
			ctx.textAlign = 'center';
			ctx.fillText(`r = ${radius} cm`, centerX + scaledRadius / 2, centerY + 20);
		},

		drawCylinder(ctx, centerX, centerY, radius, height) {
			const scaledRadius = radius * 15;
			const scaledHeight = height * 8;

			ctx.strokeStyle = '#3498db';
			ctx.lineWidth = 2;

			ctx.beginPath();
			ctx.ellipse(centerX, centerY - scaledHeight/2, scaledRadius, scaledRadius/3, 0, 0, 2 * Math.PI);
			ctx.stroke();

			ctx.beginPath();
			ctx.ellipse(centerX, centerY + scaledHeight/2, scaledRadius, scaledRadius/3, 0, 0, 2 * Math.PI);
			ctx.stroke();

			ctx.beginPath();
			ctx.moveTo(centerX - scaledRadius, centerY - scaledHeight/2);
			ctx.lineTo(centerX - scaledRadius, centerY + scaledHeight/2);
			ctx.stroke();

			ctx.beginPath();
			ctx.moveTo(centerX + scaledRadius, centerY - scaledHeight/2);
			ctx.lineTo(centerX + scaledRadius, centerY + scaledHeight/2);
			ctx.stroke();

			ctx.fillStyle = '#333';
			ctx.font = '14px Arial';
			ctx.textAlign = 'center';
			ctx.fillText(`r = ${radius} cm`, centerX + scaledRadius + 20, centerY);
			ctx.fillText(`h = ${height} cm`, centerX, centerY - scaledHeight/2 - 20);
		},

		drawRightTriangle(ctx, centerX, centerY, a, b, c) {
			const scale = 10;
			const scaledA = a * scale;
			const scaledB = b * scale;

			ctx.strokeStyle = '#3498db';
			ctx.lineWidth = 2;

			ctx.beginPath();
			ctx.moveTo(centerX, centerY);
			ctx.lineTo(centerX + scaledA, centerY);
			ctx.lineTo(centerX, centerY - scaledB);
			ctx.closePath();
			ctx.stroke();

			ctx.strokeStyle = '#e74c3c';
			const angleSize = 8;
			ctx.beginPath();
			ctx.moveTo(centerX + angleSize, centerY);
			ctx.lineTo(centerX + angleSize, centerY - angleSize);
			ctx.lineTo(centerX, centerY - angleSize);
			ctx.stroke();

			ctx.fillStyle = '#333';
			ctx.font = '14px Arial';
			ctx.textAlign = 'center';
			ctx.fillText(`${a} cm`, centerX + scaledA/2, centerY + 15);
			ctx.textAlign = 'left';
			ctx.fillText(`${b} cm`, centerX - 30, centerY - scaledB/2);
			ctx.textAlign = 'right';
			ctx.fillText(`${c} cm`, centerX + scaledA/2 + 10, centerY - scaledB/2 - 10);
		},

		drawRhombus(ctx, centerX, centerY, d1, d2, side) {
			const scale = 8;
			const scaledD1 = d1 * scale;
			const scaledD2 = d2 * scale;

			ctx.strokeStyle = '#3498db';
			ctx.lineWidth = 2;

			ctx.beginPath();
			ctx.moveTo(centerX, centerY - scaledD2/2);
			ctx.lineTo(centerX + scaledD1/2, centerY);
			ctx.lineTo(centerX, centerY + scaledD2/2);
			ctx.lineTo(centerX - scaledD1/2, centerY);
			ctx.closePath();
			ctx.stroke();

			ctx.strokeStyle = '#e74c3c';
			ctx.setLineDash([5, 3]);
			ctx.beginPath();
			ctx.moveTo(centerX - scaledD1/2, centerY);
			ctx.lineTo(centerX + scaledD1/2, centerY);
			ctx.stroke();

			ctx.beginPath();
			ctx.moveTo(centerX, centerY - scaledD2/2);
			ctx.lineTo(centerX, centerY + scaledD2/2);
			ctx.stroke();
			ctx.setLineDash([]);

			ctx.fillStyle = '#333';
			ctx.font = '14px Arial';
			ctx.textAlign = 'center';
			ctx.fillText(`${d1} cm`, centerX, centerY + 20);
			ctx.fillText(`${d2} cm`, centerX + scaledD1/2 + 15, centerY);
			ctx.fillText(`${side} cm`, centerX + scaledD1/4, centerY - scaledD2/4);
		},

		drawPyramid(ctx, centerX, centerY, base, height) {
			const scale = 8;
			const scaledBase = base * scale;
			const scaledHeight = height * scale;

			ctx.strokeStyle = '#3498db';
			ctx.lineWidth = 2;

			ctx.beginPath();
			ctx.moveTo(centerX - scaledBase/2, centerY + scaledBase/2);
			ctx.lineTo(centerX + scaledBase/2, centerY + scaledBase/2);
			ctx.lineTo(centerX + scaledBase/2, centerY - scaledBase/2);
			ctx.lineTo(centerX - scaledBase/2, centerY - scaledBase/2);
			ctx.closePath();
			ctx.stroke();

			ctx.beginPath();
			ctx.moveTo(centerX - scaledBase/2, centerY + scaledBase/2);
			ctx.lineTo(centerX, centerY - scaledHeight);
			ctx.moveTo(centerX + scaledBase/2, centerY + scaledBase/2);
			ctx.lineTo(centerX, centerY - scaledHeight);
			ctx.moveTo(centerX + scaledBase/2, centerY - scaledBase/2);
			ctx.lineTo(centerX, centerY - scaledHeight);
			ctx.moveTo(centerX - scaledBase/2, centerY - scaledBase/2);
			ctx.lineTo(centerX, centerY - scaledHeight);
			ctx.stroke();

			ctx.fillStyle = '#333';
			ctx.font = '14px Arial';
			ctx.textAlign = 'center';
			ctx.fillText(`${base} m`, centerX, centerY + scaledBase/2 + 15);
			ctx.fillText(`${height} m`, centerX + scaledBase/2 + 20, centerY);
		},

		drawCone(ctx, centerX, centerY, radius, height, slant) {
			const scale = 10;
			const scaledRadius = radius * scale;
			const scaledHeight = height * scale;

			ctx.strokeStyle = '#3498db';
			ctx.lineWidth = 2;

			ctx.beginPath();
			ctx.ellipse(centerX, centerY + scaledHeight/2, scaledRadius, scaledRadius/3, 0, 0, 2 * Math.PI);
			ctx.stroke();

			ctx.beginPath();
			ctx.moveTo(centerX - scaledRadius, centerY + scaledHeight/2);
			ctx.lineTo(centerX, centerY - scaledHeight/2);
			ctx.lineTo(centerX + scaledRadius, centerY + scaledHeight/2);
			ctx.stroke();

			ctx.strokeStyle = '#e74c3c';
			ctx.setLineDash([5, 3]);
			ctx.beginPath();
			ctx.moveTo(centerX, centerY + scaledHeight/2);
			ctx.lineTo(centerX, centerY - scaledHeight/2);
			ctx.stroke();
			ctx.setLineDash([]);

			ctx.fillStyle = '#333';
			ctx.font = '14px Arial';
			ctx.textAlign = 'center';
			ctx.fillText(`r = ${radius} cm`, centerX + scaledRadius + 15, centerY + scaledHeight/2);
			ctx.fillText(`h = ${height} cm`, centerX - 20, centerY);
			ctx.fillText(`g = ${slant} cm`, centerX + scaledRadius/2, centerY - scaledHeight/4);
		}
	};

	createApp({
		setup() {
			// États de l'application
			const categories = ref(questionsData.categories);
			const questions = ref(questionsData.questions);
			const currentCategory = ref('perimeter');
			const currentQuestionIndex = ref(0);
			const selectedAnswer = ref(null);
			const numericAnswer = ref(null);
			const answerSubmitted = ref(false);
			const answerIsCorrect = ref(false);
			const correctAnswers = ref(0);
			const totalQuestions = ref(0);
			const totalScore = ref(0);
			const totalQuestionsAttempted = ref(0);
			const pythagorasQuestions = ref([]);
			const isLoading = ref(false);
			const figureCanvas = ref(null);

			// Identifier les questions Pythagore
			const identifyPythagorasQuestions = () => {
				pythagorasQuestions.value = [];
				Object.entries(questions.value).forEach(([categoryId, categoryQuestions]) => {
					categoryQuestions.forEach(question => {
						if (question.usesPythagoras) {
							const category = categories.value.find(cat => cat.id === categoryId);
							pythagorasQuestions.value.push({
								category: category ? category.name : 'Inconnu',
								text: question.text,
								explanation: question.explanation
							});
						}
					});
				});
			};

			// Question actuelle
			const currentQuestion = computed(() => {
				const categoryQuestions = questions.value[currentCategory.value];
				return categoryQuestions ? categoryQuestions[currentQuestionIndex.value] : {};
			});

			// Progression
			const progress = computed(() => {
				const categoryQuestions = questions.value[currentCategory.value];
				return categoryQuestions ? ((currentQuestionIndex.value + 1) / categoryQuestions.length) * 100 : 0;
			});

			// Score global
			const overallScore = computed(() => {
				if (totalQuestionsAttempted.value === 0) return 0;
				return Math.round((totalScore.value / totalQuestionsAttempted.value) * 100);
			});

			// Sélectionner une catégorie
			const selectCategory = (categoryId) => {
				currentCategory.value = categoryId;
				currentQuestionIndex.value = 0;
				resetQuestionState();
				totalQuestions.value = questions.value[categoryId].length;
				drawFigure();
			};

			// Sélectionner une réponse (QCM)
			const selectAnswer = (answer) => {
				selectedAnswer.value = answer;
			};

			// Formater la réponse correcte
			const formatCorrectAnswer = (answer) => {
				if (typeof answer === 'number') {
					return answer.toString();
				}
				return answer;
			};

			// Soumettre une réponse
			const submitAnswer = () => {
				if (currentQuestion.value.type === 'qcm' && selectedAnswer.value === null) {
					alert('Veuillez sélectionner une réponse');
					return;
				}

				if (currentQuestion.value.type === 'numeric' && numericAnswer.value === null) {
					alert('Veuillez entrer une réponse');
					return;
				}

				answerSubmitted.value = true;
				totalQuestionsAttempted.value++;

				if (currentQuestion.value.type === 'qcm') {
					answerIsCorrect.value = selectedAnswer.value === currentQuestion.value.correctAnswer;
				} else {
					const tolerance = 0.01;
					answerIsCorrect.value = Math.abs(numericAnswer.value - currentQuestion.value.correctAnswer) < tolerance;
				}

				if (answerIsCorrect.value) {
					correctAnswers.value++;
					totalScore.value++;
				}
			};

			// Question suivante
			const nextQuestion = () => {
				const categoryQuestions = questions.value[currentCategory.value];
				if (currentQuestionIndex.value < categoryQuestions.length - 1) {
					currentQuestionIndex.value++;
				} else {
					currentQuestionIndex.value = 0;
				}
				resetQuestionState();
				drawFigure();
			};

			// Réinitialiser l'état de la question
			const resetQuestionState = () => {
				selectedAnswer.value = null;
				numericAnswer.value = null;
				answerSubmitted.value = false;
				answerIsCorrect.value = false;
			};

			// Dessiner la figure géométrique
			const drawFigure = () => {
				if (!currentQuestion.value.figure || !figureCanvas.value) return;

				const canvas = figureCanvas.value;
				const ctx = canvas.getContext('2d');
				const width = canvas.width;
				const height = canvas.height;

				ctx.clearRect(0, 0, width, height);
				const centerX = width / 2;
				const centerY = height / 2;

				switch (currentQuestion.value.figure) {
					case 'square':
						FigureDrawer.drawSquare(ctx, centerX, centerY, currentQuestion.value.dimensions.side);
						break;
					case 'rectangle':
						FigureDrawer.drawRectangle(ctx, centerX, centerY, currentQuestion.value.dimensions.length, currentQuestion.value.dimensions.width);
						break;
					case 'circle':
						if (currentQuestion.value.dimensions.diameter) {
							FigureDrawer.drawCircle(ctx, centerX, centerY, currentQuestion.value.dimensions.diameter / 2);
						} else {
							FigureDrawer.drawCircle(ctx, centerX, centerY, currentQuestion.value.dimensions.radius);
						}
						break;
					case 'triangle':
						FigureDrawer.drawTriangle(ctx, centerX, centerY, currentQuestion.value.dimensions.base, currentQuestion.value.dimensions.height);
						break;
					case 'cube':
						FigureDrawer.drawCube(ctx, centerX, centerY, currentQuestion.value.dimensions.side);
						break;
					case 'rectangularPrism':
						FigureDrawer.drawRectangularPrism(ctx, centerX, centerY, currentQuestion.value.dimensions.length, currentQuestion.value.dimensions.width, currentQuestion.value.dimensions.height);
						break;
					case 'sphere':
						FigureDrawer.drawSphere(ctx, centerX, centerY, currentQuestion.value.dimensions.radius);
						break;
					case 'cylinder':
						FigureDrawer.drawCylinder(ctx, centerX, centerY, currentQuestion.value.dimensions.radius, currentQuestion.value.dimensions.height);
						break;
					case 'rightTriangle':
						FigureDrawer.drawRightTriangle(ctx, centerX, centerY, currentQuestion.value.dimensions.a, currentQuestion.value.dimensions.b, currentQuestion.value.dimensions.c);
						break;
					case 'rhombus':
						FigureDrawer.drawRhombus(ctx, centerX, centerY, currentQuestion.value.dimensions.d1, currentQuestion.value.dimensions.d2, currentQuestion.value.dimensions.side);
						break;
					case 'pyramid':
						FigureDrawer.drawPyramid(ctx, centerX, centerY, currentQuestion.value.dimensions.base, currentQuestion.value.dimensions.height);
						break;
					case 'cone':
						FigureDrawer.drawCone(ctx, centerX, centerY, currentQuestion.value.dimensions.radius, currentQuestion.value.dimensions.height, currentQuestion.value.dimensions.slant);
						break;
				}
			};

			// Afficher les questions Pythagore
			const showPythagorasQuestions = () => {
				const count = pythagorasQuestions.value.length;
				let message = `Il y a ${count} question${count > 1 ? 's' : ''} utilisant le théorème de Pythagore:\n\n`;

				pythagorasQuestions.value.forEach((q, index) => {
					message += `${index + 1}. [${q.category}] ${q.text}\n`;
				});

				alert(message);
			};

			// Initialiser l'application
			onMounted(() => {
				selectCategory('perimeter');
				identifyPythagorasQuestions();
				totalQuestions.value = questions.value[currentCategory.value].length;
			});

			// Redessiner la figure quand la question change
			watch([currentQuestion, currentCategory], () => {
				drawFigure();
			});

			return {
				categories,
				currentCategory,
				currentQuestion,
				currentQuestionIndex,
				selectedAnswer,
				numericAnswer,
				answerSubmitted,
				answerIsCorrect,
				correctAnswers,
				totalQuestions,
				totalScore,
				totalQuestionsAttempted,
				overallScore,
				pythagorasQuestions,
				isLoading,
				figureCanvas,
				progress,
				selectCategory,
				selectAnswer,
				submitAnswer,
				nextQuestion,
				formatCorrectAnswer,
				showPythagorasQuestions
			};
		}
	}).mount('#app');
</script>
</body>
</html>